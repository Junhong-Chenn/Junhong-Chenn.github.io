<div class="detail">
  <button nz-button nzType="primary" nzShape="circle" (click)="close()" class="close">X</button>
  <nz-collapse nzAccordion>
    <nz-collapse-panel nzHeader="Basic info" [nzActive]="true">
      <form
        nz-form
        nzLayout="horizontal"
        [formGroup]="caseDetailForm"
      >
    <nz-form-item>
      <nz-form-label [nzSpan]="4">Name</nz-form-label>
      <nz-form-control [nzSpan]="14" nzErrorTip="Please input name!">
        <input nz-input formControlName="name" placeholder="input placeholder" />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="4">DateOfBirth</nz-form-label>
      <nz-form-control [nzSpan]="14" nzErrorTip="Please input name!">
        <nz-date-picker formControlName="dateOfBirth"></nz-date-picker>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="4">Email</nz-form-label>
      <nz-form-control [nzSpan]="14" nzErrorTip="Please input">
        <input nz-input formControlName="email" placeholder="input placeholder" />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="4">ContactNumber</nz-form-label>
      <nz-form-control [nzSpan]="14" nzErrorTip="Please input">
        <input nz-input formControlName="contactNumber" placeholder="input placeholder" />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="4">Gender</nz-form-label>
      <nz-form-control [nzSpan]="14" nzErrorTip="Please input">
        <nz-radio-group formControlName="gender">
          <label nz-radio nzValue="Male">Male</label>
          <label nz-radio nzValue="Female">Female</label>
        </nz-radio-group>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="4">MoveInDate</nz-form-label>
      <nz-form-control [nzSpan]="14" nzErrorTip="Please input">
        <nz-date-picker formControlName="moveInDate"></nz-date-picker>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="4">DevelopGoal</nz-form-label>
      <nz-form-control [nzSpan]="14" nzErrorTip="Please input name!">
        <nz-select
        nzMode="multiple"
        nzPlaceHolder="Please select"
        formControlName="developGoal"
        >
          <nz-option *ngFor="let item of serviceData?.serviceCategories" [nzLabel]="item" [nzValue]="item"></nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="4">SubstanceUseHistory</nz-form-label>
      <nz-form-control [nzSpan]="14" nzErrorTip="Please input">
        <nz-select formControlName="substanceUseHistory">
          <nz-option nzValue="< 6 months" nzLabel="< 6 months"></nz-option>
          <nz-option nzValue="6 months ~ 18 months" nzLabel="6 months ~ 18 months"></nz-option>
          <nz-option nzValue="> 18 months" nzLabel="> 18 months"></nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="4">SubstanceCategory</nz-form-label>
      <nz-form-control [nzSpan]="14" nzErrorTip="Please input">
        <input nz-input formControlName="substanceCategory" placeholder="input placeholder" />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="4">SubstanceActiveUse</nz-form-label>
      <nz-form-control [nzSpan]="14" nzErrorTip="Please input">
        <nz-switch formControlName="substanceActiveUse"></nz-switch>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="4">ConditionSummary</nz-form-label>
      <nz-form-control [nzSpan]="14" nzErrorTip="Please input name!">
        <textarea rows="3" nz-input formControlName="conditionSummary"></textarea>
      </nz-form-control>
    </nz-form-item>
  </form>
    </nz-collapse-panel>
    <nz-collapse-panel nzHeader="Service" [nzActive]="false" *ngIf="caseDetail">
      <nz-table
      nzSize="small"
      [nzShowPagination]='false'
      class="table"
      [nzData]="caseDetail.serviceItemList"
      [nzScroll]="{ x: '1600px',y: 'calc(100vh - 500px)' }"
    >
    <thead>
      <tr>
        <th>ServiceName</th>
        <th>ServiceProvider</th>
        <th>OrganizationAddress</th>
        <th>ServiceCategory</th>
        <th>ServiceStartDate</th>
        <th>ServiceStatus</th>
        <th>ServiceComments</th>
        <th>ServiceFeedback</th>
        <th>CaseWorker</th>
        <th nzRight [nzWidth]="'75px'">Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of caseDetail.serviceItemList">
        <td>{{data.serviceName}}</td>
        <td>{{data.serviceProvider}}</td>
        <td nzEllipsis>{{data.organizationAddress}}</td>
        <td>{{data.serviceCategory}}</td>
        <td>{{data.serviceStartDate}}</td>
        <td>
          <nz-tag [nzColor]="data.serviceStatus=='Complete'?'success':'processing'">
            {{data.serviceStatus}}
          </nz-tag>
        </td>
        <td nzEllipsis>{{data.serviceComments}}</td>
        <td nzEllipsis>{{data.serviceFeedback}}</td>
        <td>{{data.caseWorker}}</td>
        <td nzRight>
          <a>Edit</a>
        </td>
      </tr>
    </tbody>
  </nz-table>
    </nz-collapse-panel>
    <nz-collapse-panel nzHeader="Journal" [nzActive]="false" *ngIf="caseDetail && journalData.activity">
      <div nz-row [nzGutter]="24">
      <nz-comment nz-col [nzSpan]="8">
        <nz-comment-content>
          <nz-form-item>
            <textarea [(ngModel)]="inputValue" nz-input rows="4"></textarea>
          </nz-form-item>
          <nz-form-item>
            <button nz-button nzType="primary" [nzLoading]="submitting" [disabled]="!inputValue" (click)="handleSubmit()">
              Add Comment
            </button>
          </nz-form-item>
        </nz-comment-content>
      </nz-comment>
      <nz-timeline [nzReverse]="true" nz-col [nzSpan]="16">
        <nz-timeline-item *ngFor="let data of journalData.activity">
          <h3>{{data.operator}}</h3>
          <p>{{data.time}}</p>
          <span>{{data.note}}</span>
        </nz-timeline-item>
      </nz-timeline>
      </div>
    </nz-collapse-panel>
  </nz-collapse>
  <div class="btns">
    <button nz-button nzType="primary">Add Service</button>
    <button nz-button nzType="primary" (click)="save()">Save</button>
    <button nz-button nzType="default" (click)="reset()">Reset</button>
    <button nz-button nzType="default">leave TSC</button>
  </div>
</div>
